<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: calculator-view.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: calculator-view.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
  * CalculatorView: Component representing a calculator via HTML+CSS
  * Only responsible for the view. Uses a calculator instance for actual processing
  */
class CalculatorView {
  context;

  calculator;

  prevValueScreen;
  operatorScreen;
  myScreen;

  constructor(context, calculator) {
    this.context = context;
    this.calculator = calculator;

    this.init();
  }

  /**
   * Initializes our component
   */
  init() {
    // Grab our screen elements
    this.prevValueScreen = this.context.getElementById('calculator__prev-value');
    this.operatorScreen = this.context.getElementById('calculator__operator');
    this.myScreen = this.context.getElementById('calculator__screen-value');

    // Init screen value
    this.refreshScreen();

    // Grab all our buttons
    const buttons = this.context.getElementsByClassName("calculator__button");
    for (let button of buttons) {
      // Receive click events
      button.addEventListener('click', evt => this.processClick(button, evt));
    }


    // Receive keyboard inputs
    this.context.addEventListener('keydown', evt => this.handleKeyboard(evt));
  }


  /**
   * Refresh our screen with current values
   */
  refreshScreen() {
    if (this.calculator.currentOperatorSymbol == null) {
      this.prevValueScreen.textContent = "";
      this.operatorScreen.textContent = "";
    } else {
      this.prevValueScreen.textContent = this.calculator.prevValue.toString();
      this.operatorScreen.textContent = CalculatorView.operationsSymbolsDict[this.calculator.currentOperatorSymbol];
    }

    this.myScreen.value = this.calculator.currentValueString;
  }

  /**
   * Process a click on one of our buttons. When called, 'this' is bound to the clicked button
   * 
   * @param {DOMButton} button  The button from which originated the click
   * @param {MouseEvent} event DOM event generated by the click
   */
  processClick(button, event) {
    const buttonValue = button.value;
    if (Calculator.isOperator(buttonValue)) {
      this.calculator.processOperator(buttonValue);
    } else {
      this.calculator.processNumber(buttonValue);
    }

    this.refreshScreen();
  }

  /**
   * Handles keypresses from user
   * @param {KeyboardEvent} event The input event
   */
  handleKeyboard(event) {
    let bHandled = false;
    if (CalculatorView.keysToOperatorsDict[event.key] !== undefined) {
      const operator = CalculatorView.keysToOperatorsDict[event.key];
      this.calculator.processOperator(operator);
      bHandled = true;
    } else if (Calculator.isNumber(event.key)) {
      this.calculator.processNumber(event.key);
      bHandled = true;
    }

    if (bHandled) {
      event.preventDefault();
      this.refreshScreen();
    }
  }
}

CalculatorView.operationsSymbolsDict = {
  "div": "/",
  "mul": "*",
  "sub": "-",
  "add": "+"
};

CalculatorView.keysToOperatorsDict = {
  "Escape": "clearElement",
  "Backspace": "back",
  "/": "div",
  "*": "mul",
  "-": "sub",
  "+": "add",
  ".": "dot",
  ",": "dot",
  "Enter": "equals",
  "=": "equals"
};</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Calculator.html">Calculator</a></li><li><a href="CalculatorView.html">CalculatorView</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Mon Mar 11 2019 08:31:38 GMT+0100 (GMT+01:00)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
